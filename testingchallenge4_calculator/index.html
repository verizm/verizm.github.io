<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Calculator</title>
  <meta name="description" content="The HTML5 Herald">
  <meta name="author" content="SitePoint">
</head>

<body>
  <h1>Hello, tester!</h1>
  <h3>Specification</h3>
  <text>
	Each person born in Romania receives a unique identification number.<br/>
	The number has 13 digits, e.g. 1234567890123<br/>
	What the digits represent:<br/>
	First digit – the gender: male or female<br/>
	1 or 2 – born between 1 January 1900 and 31 December 1999<br/>
	3 or 4 - born between 1 January 1800 and 31 December 1899<br/>
	5 or 6 - born between 1 January 2000 and 31 December 2099<br/>
	7 or 8 – Foreign residents in Romania.<br/>
	9 - For non-residents<br/>
	Next 2 digits – last 2 digits of the year of birth (e.g. born in 1980 then it will 80)<br/>
	Next 2 digits – month of birth (01 to 12)<br/>
	Next 2 digits - date of birth (01 to 31 depending on the month of birth)<br/>
	Next 2 digits – area code (valid codes are 01 to 52)<br/>
	Next 3 digits – order number<br/>
	Last digit control number is created by:
  </text>
  <h3>Please, enter 12 number:</h3>
  <input id="input" type="number" maxlength="12">
  <br/>
  <label id="result"></label>
  <script type="text/javascript">
    window.onload = function(e) {
	  var sel = document.getElementById("input");
      sel.addEventListener("input", function (e) {
		console.log("CHANGE:", e.target.value);
		var str = String(e.target.value);
		if (str.length == 12)
		{
		    var split_number = function(number) {
				var array = [];
				while (number > 0)
				{
				    array.push(number % 10);
                    number = parseInt(number / 10);
				}
			    return array.reverse();
			};
			var origin_number = e.target.value;
		    var control_number = 279146358279;

			var array_origin_number = split_number(origin_number);
			var array_control_number = split_number(control_number);

			var result = 0;
			for (var i = 0; i < 12; i++)
			{
				result = result + array_origin_number[i] * array_control_number[i]
			}

			result = result % 11;
			if (result == 10)
			{
				result = 1;
			}

		    var show = document.getElementById("result");
            show.innerHTML = String(result);
		}
      });
    }
  </script>
</body>
</html>
